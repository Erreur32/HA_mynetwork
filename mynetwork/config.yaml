name: "MynetworK"
slug: "mynetwork"
version: "0.1.3"
description: "Multi-source network dashboard (Freebox, UniFi, network scan) for Home Assistant"
arch:
  - amd64
  - aarch64
  - armv7
  # - armhf  # optional if linux/arm/v6 image is published

# App security (https://developers.home-assistant.io/docs/apps/security): Protection + API role.
# By default apps run in protection-enabled mode; to use NET_RAW/NET_ADMIN the user must disable
# protection via the app's Security section in the UI (or via Supervisor API). Only hassio_role:
# admin allows that app to have its protection mode toggled (required for this add-on).
hassio_api: true
hassio_role: admin

startup: application
init: false

ingress: true
ingress_port: 3000
ingress_entry: /
panel_title: "MynetworK"
panel_icon: "mdi:network"
panel_admin: false

watchdog: "http://[HOST]:[PORT:3000]/api/health"

# Expose port so Supervisor UI may show the "Protected mode" toggle (like Dozzle Agent which has ports + docker_api).
# Optional: disable in add-on Network tab if you only use Ingress. Port is same as ingress_port.
ports:
  3000/tcp: 3000
ports_description:
  3000/tcp: "Web UI / API (same as Ingress; disable protection for NET_RAW/NET_ADMIN)"

privileged:
  - NET_RAW
  - NET_ADMIN

# host_network: true  # enable only if network scan is incomplete (see docs)

# Supervisor data volume at /data so /app (image content: server/, node_modules/) is never overwritten by the mount.
# run.sh reads options from /data/options.json and sets DATABASE_PATH, CONFIG_FILE_PATH, FREEBOX_TOKEN_FILE to /data/...
map:
  - type: data
    path: /data
    read_only: false

# Options: two categories â€” general (auth, logs, Freebox) and network (port, show ports).
# Reset to defaults: remove add-on and reinstall, or clear options via Supervisor API (see DOCS).
options:
  log_level: "info"
  jwt_secret: ""
  default_admin_username: "admin"
  default_admin_password: ""
  default_admin_email: "admin@localhost"
  freebox_host: ""
  network:
    server_port: 3000
    show_ports: true
schema:
  log_level: list(debug|info|warning|error)
  jwt_secret: password
  default_admin_username: str
  default_admin_password: password
  default_admin_email: str
  freebox_host: str?
  network:
    server_port: port
    show_ports: bool
