import{j as e,q as ze,E as f,r as me}from"./index-D769t3SB.js";import{r as i}from"./vendor-charts-fy94SsLU.js";import{K as Z,X as H,_ as A,c as O,a2 as R,aO as xe,S as he,W as pe,Y as ue,aV as $,af as ke,I as Ie}from"./vendor-icons-Wr2_Nvt-.js";import"./vendor-D9iDNHsv.js";import"./vendor-state-CiM9n9np.js";const Ee=({isOpen:X,onClose:S})=>X?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-[#121212] border border-gray-700 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Z,{size:24,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Options de recherche"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Explications et exemples pour chaque option"})]})]}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-800 rounded-lg",children:e.jsx(H,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-500/20 border border-emerald-500/50 rounded-lg",children:[e.jsx(A,{size:16,className:"text-emerald-400"}),e.jsx("span",{className:"text-sm font-medium text-emerald-400",children:"Actif seulement"})]})}),e.jsx("p",{className:"text-sm text-gray-300 ml-1",children:"Affiche uniquement les appareils et Ã©lÃ©ments actuellement actifs/en ligne."}),e.jsxs("div",{className:"ml-1 p-3 bg-gray-900/50 rounded-lg border border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2 font-medium",children:"Exemple :"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-300",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-emerald-400",children:"Avec"})," : Affiche seulement les appareils connectÃ©s actuellement"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-gray-500",children:"Sans"})," : Affiche tous les appareils (actifs et inactifs)"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500/20 border border-blue-500/50 rounded-lg",children:[e.jsx(O,{size:16,className:"text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Correspondance exacte"})]})}),e.jsx("p",{className:"text-sm text-gray-300 ml-1",children:"La recherche doit correspondre exactement au terme recherchÃ© (pas de recherche partielle)."}),e.jsxs("div",{className:"ml-1 p-3 bg-gray-900/50 rounded-lg border border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2 font-medium",children:"Exemple :"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-300",children:[e.jsxs("p",{children:["â€¢ Recherche : ",e.jsx("span",{className:"text-blue-400 font-mono",children:'"iPhone"'})]}),e.jsxs("p",{className:"text-gray-500 ml-4",children:["- ",e.jsx("span",{className:"text-emerald-400",children:"Avec"}),' : Trouve uniquement "iPhone" (pas "iPhone 13" ni "iPhone 14")']}),e.jsxs("p",{className:"text-gray-500 ml-4",children:["- ",e.jsx("span",{className:"text-gray-500",children:"Sans"}),' : Trouve "iPhone", "iPhone 13", "iPhone 14 Pro", etc.']})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-purple-500/20 border border-purple-500/50 rounded-lg",children:[e.jsx(O,{size:16,className:"text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-400",children:"Sensible Ã  la casse"})]})}),e.jsx("p",{className:"text-sm text-gray-300 ml-1",children:"La recherche distingue les majuscules et les minuscules."}),e.jsxs("div",{className:"ml-1 p-3 bg-gray-900/50 rounded-lg border border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2 font-medium",children:"Exemple :"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-300",children:[e.jsxs("p",{children:["â€¢ Recherche : ",e.jsx("span",{className:"text-purple-400 font-mono",children:'"Freebox"'})]}),e.jsxs("p",{className:"text-gray-500 ml-4",children:["- ",e.jsx("span",{className:"text-emerald-400",children:"Avec"}),' : Trouve "Freebox" mais pas "freebox" ni "FREEBOX"']}),e.jsxs("p",{className:"text-gray-500 ml-4",children:["- ",e.jsx("span",{className:"text-gray-500",children:"Sans"}),' : Trouve "Freebox", "freebox", "FREEBOX", etc.']})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-cyan-500/20 border border-cyan-500/50 rounded-lg",children:[e.jsx(A,{size:16,className:"text-cyan-400"}),e.jsx("span",{className:"text-sm font-medium text-cyan-400",children:"Ping IP locales (IPv4)"})]})}),e.jsx("p",{className:"text-sm text-gray-300 ml-1",children:"Teste la connectivitÃ© rÃ©seau des adresses IP locales trouvÃ©es dans les rÃ©sultats de recherche."}),e.jsxs("div",{className:"ml-1 p-3 bg-gray-900/50 rounded-lg border border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2 font-medium",children:"Fonctionnement :"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-cyan-400 font-medium mb-1",children:"âœ“ IP autorisÃ©es (locales uniquement) :"}),e.jsx("p",{className:"ml-2 text-gray-400",children:"â€¢ 192.168.x.x (rÃ©seaux privÃ©s)"}),e.jsx("p",{className:"ml-2 text-gray-400",children:"â€¢ 10.x.x.x (rÃ©seaux privÃ©s)"}),e.jsx("p",{className:"ml-2 text-gray-400",children:"â€¢ 172.16-31.x.x (rÃ©seaux privÃ©s)"}),e.jsx("p",{className:"ml-2 text-gray-400",children:"â€¢ 127.x.x.x (localhost)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 font-medium mb-1",children:"âœ— IP non autorisÃ©es :"}),e.jsx("p",{className:"ml-2 text-gray-400",children:"â€¢ IP publiques (ex: 8.8.8.8, 1.1.1.1)"}),e.jsx("p",{className:"ml-2 text-gray-400",children:"â€¢ IP externes/internet"}),e.jsx("p",{className:"ml-2 text-gray-400",children:"â€¢ IPv6 (non supportÃ©)"})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-800",children:[e.jsx("p",{className:"text-cyan-400 font-medium mb-1",children:"Comment Ã§a marche :"}),e.jsxs("p",{className:"ml-2",children:["â€¢ Ping automatique de ",e.jsx("span",{className:"text-cyan-400 font-mono",children:"toutes"})," les IP locales trouvÃ©es dans les rÃ©sultats"]}),e.jsx("p",{className:"ml-2",children:"â€¢ 3 pings par IP pour calculer la latence moyenne"}),e.jsx("p",{className:"ml-2",children:"â€¢ Ping sÃ©quentiel (une IP aprÃ¨s l'autre) avec dÃ©lai de 200ms"}),e.jsx("p",{className:"ml-2",children:"â€¢ Affichage du rÃ©sultat :"}),e.jsx("p",{className:"ml-6 text-emerald-400",children:"âœ“ RÃ©pond (ex: 5ms, 12ms)"}),e.jsx("p",{className:"ml-6 text-red-400",children:"âœ— Ne rÃ©pond pas"})]}),e.jsx("p",{className:"text-gray-500 mt-2 pt-2 border-t border-gray-800",children:"âš ï¸ Note : DÃ©sactive automatiquement les autres options de recherche pendant le ping."})]})]})]})]})]}),e.jsxs("div",{className:"pt-6 mt-6 border-t border-gray-800",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-2 flex items-center gap-2",children:[e.jsx(Z,{size:16,className:"text-blue-400"}),"Conseils de recherche"]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-300 ml-1",children:[e.jsxs("p",{children:["â€¢ Vous pouvez rechercher par : ",e.jsx("span",{className:"text-blue-400",children:"nom"}),", ",e.jsx("span",{className:"text-blue-400",children:"adresse MAC"}),", ",e.jsx("span",{className:"text-blue-400",children:"adresse IP"}),", ",e.jsx("span",{className:"text-blue-400",children:"port"}),", ",e.jsx("span",{className:"text-blue-400",children:"hostname"})]}),e.jsxs("p",{children:["â€¢ Utilisez les ",e.jsx("span",{className:"text-purple-400",children:"filtres par plugin"})," pour limiter la recherche Ã  Freebox ou UniFi"]}),e.jsxs("p",{children:["â€¢ Utilisez les ",e.jsx("span",{className:"text-purple-400",children:"filtres par type"})," pour rechercher uniquement des appareils, clients, points d'accÃ¨s, etc."]}),e.jsx("p",{children:"â€¢ Les rÃ©sultats peuvent Ãªtre triÃ©s en cliquant sur les en-tÃªtes de colonnes"})]})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t border-gray-800",children:e.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm font-medium",children:"Compris"})})]})}):null,B=20,Le=({onBack:X})=>{const{plugins:S}=ze(),[l,ge]=i.useState(()=>{const s=sessionStorage.getItem("searchQuery")||"";return sessionStorage.getItem("searchQuery")&&sessionStorage.removeItem("searchQuery"),s}),[y,P]=i.useState([]),[C,_]=i.useState(!1),[K,q]=i.useState(null),[F,M]=i.useState(!1),[j,W]=i.useState(!1),[N,G]=i.useState(!1),[x,Y]=i.useState(!0),[c,ye]=i.useState(!1),[o,z]=i.useState({}),[p,k]=i.useState(new Set),[be,J]=i.useState(!1),L=i.useMemo(()=>S.filter(s=>s.enabled&&s.connectionStatus),[S]),[m,D]=i.useState([]),[u,fe]=i.useState([]),[h,je]=i.useState("name"),[T,ee]=i.useState("asc"),[v,U]=i.useState(1);i.useEffect(()=>{const s=L.map(t=>t.id);s.length>0&&m.length===0?D(s):s.length>0&&D(t=>t.filter(r=>s.includes(r)))},[L,m.length]);const w=s=>{if(!s||!/^(\d{1,3}\.){3}\d{1,3}$/.test(s))return!1;const r=s.split(".").map(Number);return r.length!==4||r.some(a=>a<0||a>255)?!1:r[0]===10||r[0]===172&&r[1]>=16&&r[1]<=31||r[0]===192&&r[1]===168||r[0]===127},g=s=>{if(!s)return!1;if(/^(\d{1,3}\.){3}\d{1,3}$/.test(s)){const a=s.split(".").map(Number);return a.length===4&&a.every(n=>n>=0&&n<=255)}return/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/.test(s)||s==="localhost"},se=async(s,t=!1)=>{if(!g(s))return{success:!1,error:"Adresse IP ou domaine invalide"};if(!w(s)&&!t)return{success:!1,error:'Ping exterieur ignorÃ© en mode automatique. Utilisez le bouton "Ping direct" pour pinger des IP externes.'};try{const a=await me.get(`/api/speedtest/ping?target=${encodeURIComponent(s)}&count=3`);if(a.success&&a.result&&"latency"in a.result&&typeof a.result.latency=="number"){const n=Math.round(a.result.latency);return{success:!0,time:n>0?n:1}}else return{success:!1,error:"Ping Ã©chouÃ©"}}catch(a){const n=a.message||"Erreur lors du ping";return n.includes("socket")||n.includes("ended")||n.includes("ECONNRESET")?{success:!1,error:"Connexion interrompue"}:{success:!1,error:n}}},V=async s=>{if(s){k(t=>new Set(t).add(s));try{const t=w(s),r=await se(s,!t);z(a=>({...a,[s]:r}))}catch{z(r=>({...r,[s]:{success:!1,error:"Erreur"}}))}finally{k(t=>{const r=new Set(t);return r.delete(s),r})}}},te=async s=>{if(!c||s.length===0)return;const t=s.filter(r=>r.ip?w(r.ip):!1).map(r=>r.ip).filter((r,a,n)=>n.indexOf(r)===a);if(t.length!==0){k(new Set(t));for(let r=0;r<t.length;r++){const a=t[r];try{const n=await se(a);z(d=>({...d,[a]:n}))}catch{z(d=>({...d,[a]:{success:!1,error:"Erreur"}}))}k(n=>{const d=new Set(n);return d.delete(a),d}),r<t.length-1&&await new Promise(n=>setTimeout(n,200))}}},Ne=async s=>{if(!s.trim()||!g(s.trim()))return;const t=s.trim();w(t),g(t)&&await V(t)},Q=async s=>{var t,r,a;if(!s.trim()){P([]),M(!1);return}_(!0),q(null),M(!0);try{const n=await me.post("/api/search",{query:s.trim(),pluginIds:m.length>0?m:void 0,types:u.length>0?u:void 0,exactMatch:j,caseSensitive:N});if(n.success&&((t=n.result)!=null&&t.results))P(n.result.results),c&&te(n.result.results);else{const d=((r=n.error)==null?void 0:r.message)||"Erreur lors de la recherche";q(d),P([])}}catch(n){let d="Erreur lors de la recherche";n.message?n.message.includes("socket")||n.message.includes("ended")||n.message.includes("ECONNRESET")?d="Connexion interrompue. Veuillez rÃ©essayer.":n.message.includes("timeout")||n.message.includes("TIMEOUT")?d="La recherche a expirÃ©. Veuillez rÃ©essayer.":n.message.includes("aborted")||n.message.includes("ABORTED")?d="Recherche annulÃ©e.":d=n.message:(a=n.error)!=null&&a.message&&(d=n.error.message),q(d),P([])}finally{_(!1)}};i.useEffect(()=>{l&&Q(l)},[]),i.useEffect(()=>{l&&F&&Q(l)},[m,u,j,N,x]);const b=i.useMemo(()=>{let s=[...y];return m.length>0&&(s=s.filter(t=>m.includes(t.pluginId))),u.length>0&&(s=s.filter(t=>u.includes(t.type))),x&&(s=s.filter(t=>t.active===!0)),s.sort((t,r)=>{var d,le,ie,ce,de,oe;let a,n;switch(h){case"name":a=((d=t.name)==null?void 0:d.toLowerCase())||"",n=((le=r.name)==null?void 0:le.toLowerCase())||"";break;case"plugin":a=((ie=t.pluginName)==null?void 0:ie.toLowerCase())||"",n=((ce=r.pluginName)==null?void 0:ce.toLowerCase())||"";break;case"type":a=t.type||"",n=r.type||"";break;case"ip":a=t.ip||"",n=r.ip||"";break;case"mac":a=((de=t.mac)==null?void 0:de.toLowerCase())||"",n=((oe=r.mac)==null?void 0:oe.toLowerCase())||"";break;default:return 0}return a<n?T==="asc"?-1:1:a>n?T==="asc"?1:-1:0}),s},[y,m,u,x,h,T]),I=Math.ceil(b.length/B),ve=i.useMemo(()=>{const s=(v-1)*B;return b.slice(s,s+B)},[b,v]);i.useEffect(()=>{U(1)},[m,u,x,h,T]);const re=i.useMemo(()=>{const s=new Set;return y.forEach(t=>s.add(t.type)),Array.from(s).sort()},[y]),ae=s=>({device:"Appareil",dhcp:"DHCP","port-forward":"Redirection de port",client:"Client",ap:"Point d'accÃ¨s",switch:"Switch"})[s]||s,we=s=>s?s.toUpperCase().replace(/(.{2})/g,"$1:").slice(0,-1):"--",Se=s=>{if(!s)return"--";try{return new Date(s).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"--"}},ne=()=>{l.trim()?Q(l):(M(!1),P([]))},Pe=s=>{D(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},Ce=s=>{fe(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},E=s=>{h===s?ee(t=>t==="asc"?"desc":"asc"):(je(s),ee("asc"))};return e.jsxs("div",{className:"min-h-screen bg-theme-primary",children:[e.jsxs("div",{className:"max-w-[1920px] mx-auto p-4 md:p-6 space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-sm text-theme-secondary",children:"Recherche dans les plugins actifs (Freebox, UniFi)"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(f,{title:"Rechercher",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(O,{size:24,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-accent-primary opacity-80"}),e.jsx("input",{type:"text",value:l,onChange:s=>{ge(s.target.value),F&&M(!1)},onKeyDown:s=>{s.key==="Enter"&&ne()},placeholder:"Rechercher (nom, MAC, IP, port, hostname...)",className:"w-full pl-14 pr-4 py-3 bg-theme-secondary border border-theme rounded-lg text-theme-primary placeholder-theme-tertiary focus:outline-none transition-all"})]}),e.jsx("button",{onClick:ne,disabled:C||!l.trim(),className:"px-6 py-3 bg-accent-primary text-white rounded-lg hover:bg-accent-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 font-medium shadow-lg shadow-accent-primary/20",children:C?e.jsxs(e.Fragment,{children:[e.jsx(R,{size:18,className:"animate-spin"}),"Recherche..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:18}),"Rechercher"]})}),c&&l.trim()&&g(l.trim())&&e.jsx("button",{onClick:()=>V(l.trim()),disabled:p.has(l.trim()),className:`px-4 py-3 rounded-lg transition-all flex items-center gap-2 font-medium ${p.has(l.trim())?"bg-theme-tertiary text-theme-secondary cursor-not-allowed":"bg-cyan-500 text-white hover:bg-cyan-600 shadow-lg shadow-cyan-500/20"}`,title:`Pinger directement ${l.trim()} (sans recherche dans les rÃ©sultats)`,children:p.has(l.trim())?e.jsxs(e.Fragment,{children:[e.jsx(R,{size:18,className:"animate-spin"}),"Ping..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{size:18}),"Ping direct"]})})]}),l.trim()&&g(l.trim())&&o[l.trim()]&&e.jsx("div",{className:`p-3 rounded-lg border ${o[l.trim()].success?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsx("div",{className:"flex items-center gap-2",children:o[l.trim()].success?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:16,className:"text-emerald-400"}),e.jsxs("span",{className:"text-sm text-emerald-400 font-medium",children:[l.trim()," rÃ©pond en ",o[l.trim()].time,"ms"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{size:16,className:"text-red-400"}),e.jsxs("span",{className:"text-sm text-red-400",children:[l.trim()," ne rÃ©pond pas",o[l.trim()].error&&` (${o[l.trim()].error})`]})]})})}),L.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-theme-secondary mb-3 block",children:"Plugins"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:L.map(s=>{const t=s.id==="freebox",r=s.id==="unifi",a=m.includes(s.id);return e.jsxs("button",{onClick:()=>Pe(s.id),className:`group relative px-4 py-2.5 rounded-lg text-sm font-medium border transition-all duration-200 flex items-center gap-2 ${a?t?"bg-blue-500/20 border-blue-500/50 text-blue-400 shadow-lg shadow-blue-500/10":r?"bg-purple-500/20 border-purple-500/50 text-purple-400 shadow-lg shadow-purple-500/10":"bg-accent-primary/20 border-accent-primary text-accent-primary":"bg-theme-secondary border-theme text-theme-secondary hover:bg-theme-tertiary hover:border-theme-hover"}`,children:[t&&e.jsx(he,{size:16,className:a?"text-blue-400":"text-theme-tertiary"}),r&&e.jsx(pe,{size:16,className:a?"text-purple-400":"text-theme-tertiary"}),e.jsx("span",{children:s.name}),a&&e.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",y.filter(n=>n.pluginId===s.id).length,")"]})]},s.id)})})]})]})})}),e.jsx("div",{children:e.jsx(f,{title:"Filtres",actions:e.jsx("button",{onClick:()=>J(!0),className:"p-1.5 hover:bg-theme-tertiary rounded-lg transition-colors text-theme-secondary hover:text-theme-primary",title:"Aide sur les options de recherche",children:e.jsx(Z,{size:18})}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-sm",children:[e.jsxs("button",{onClick:()=>{c||Y(!x)},disabled:c,className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-200 font-medium ${c?"opacity-50 cursor-not-allowed bg-theme-secondary border-theme text-theme-tertiary":x?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400 shadow-lg shadow-emerald-500/10":"bg-theme-secondary border-theme text-theme-secondary hover:bg-theme-tertiary hover:border-theme-hover"}`,children:[e.jsx("div",{className:`relative w-10 h-5 rounded-full transition-all duration-200 ${x?"bg-emerald-500":"bg-theme-tertiary"}`,children:e.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-all duration-200 shadow-md ${x?"translate-x-5":"translate-x-0"}`})}),e.jsx("span",{children:"Actif seulement"}),e.jsx(A,{size:12,className:x?"text-emerald-400":"text-theme-tertiary"})]}),e.jsxs("button",{onClick:()=>{c||W(!j)},disabled:c,className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-200 font-medium ${c?"opacity-50 cursor-not-allowed bg-theme-secondary border-theme text-theme-tertiary":j?"bg-accent-primary/20 border-accent-primary text-accent-primary shadow-lg shadow-accent-primary/10":"bg-theme-secondary border-theme text-theme-secondary hover:bg-theme-tertiary hover:border-theme-hover"}`,children:[e.jsx("div",{className:`relative w-10 h-5 rounded-full transition-all duration-200 ${j?"bg-blue-500":"bg-theme-tertiary"}`,children:e.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-all duration-200 shadow-md ${j?"translate-x-5":"translate-x-0"}`})}),e.jsx("span",{children:"Exacte"})]}),e.jsxs("button",{onClick:()=>{c||G(!N)},disabled:c,className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-200 font-medium ${c?"opacity-50 cursor-not-allowed bg-theme-secondary border-theme text-theme-tertiary":N?"bg-accent-primary/20 border-accent-primary text-accent-primary shadow-lg shadow-accent-primary/10":"bg-theme-secondary border-theme text-theme-secondary hover:bg-theme-tertiary hover:border-theme-hover"}`,children:[e.jsx("div",{className:`relative w-10 h-5 rounded-full transition-all duration-200 ${N?"bg-purple-500":"bg-theme-tertiary"}`,children:e.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-all duration-200 shadow-md ${N?"translate-x-5":"translate-x-0"}`})}),e.jsx("span",{children:"Case sensitive "})]}),e.jsxs("button",{onClick:async()=>{const s=!c;ye(s),s?(W(!1),G(!1),Y(!1),y.length>0?await te(b):l.trim()&&g(l.trim())&&await Ne(l.trim())):(z({}),k(new Set))},className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-200 font-medium ${c?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400 shadow-lg shadow-cyan-500/10":"bg-theme-secondary border-theme text-theme-secondary hover:bg-theme-tertiary hover:border-theme-hover"}`,children:[e.jsx("div",{className:`relative w-10 h-5 rounded-full transition-all duration-200 ${c?"bg-cyan-500":"bg-theme-tertiary"}`,children:e.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-all duration-200 shadow-md ${c?"translate-x-5":"translate-x-0"}`})}),e.jsx("span",{children:"Ping automatique des rÃ©sultats "})]})]}),re.length>0&&e.jsx("div",{className:"pt-3 border-t border-theme",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-theme-secondary mb-3 block",children:"Types de rÃ©sultats"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:re.map(s=>{const t=u.includes(s),r=b.filter(n=>n.type===s).length;let a="";if(t)switch(s){case"device":case"client":a="bg-emerald-500/20 border-emerald-500/50 text-emerald-400";break;case"ap":case"switch":a="bg-cyan-500/20 border-cyan-500/50 text-cyan-400";break;case"dhcp":a="bg-amber-500/20 border-amber-500/50 text-amber-400";break;case"port-forward":a="bg-orange-500/20 border-orange-500/50 text-orange-400";break;default:a="bg-accent-primary/20 border-accent-primary text-accent-primary"}else a="bg-theme-secondary border-theme text-theme-secondary hover:bg-theme-tertiary";return e.jsxs("button",{onClick:()=>Ce(s),className:`px-3 py-1.5 rounded-lg text-sm border transition-all duration-200 font-medium ${a}`,children:[ae(s),t&&r>0&&e.jsxs("span",{className:"ml-1.5 text-xs opacity-70",children:["(",r,")"]})]},s)})})]})})]})})})]}),C?e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(R,{size:32,className:"animate-spin text-accent-primary"}),e.jsx("span",{className:"ml-3 text-theme-secondary",children:"Recherche en cours..."})]})}):K?e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-center py-12 text-accent-error",children:[e.jsx(ue,{size:24,className:"mr-2"}),e.jsx("span",{children:K})]})}):y.length===0&&l&&F&&!C?e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-center py-12 text-theme-secondary",children:[e.jsx(ue,{size:24,className:"mr-2"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("span",{className:"block",children:['Aucun rÃ©sultat trouvÃ© pour "',l,'"']}),e.jsx("span",{className:"block text-sm text-theme-tertiary",children:"La recherche fonctionne uniquement dans les donnÃ©es locales des plugins (appareils, clients, DHCP, etc.)"}),g(l)&&!w(l)&&e.jsxs("span",{className:"block text-sm text-cyan-400 mt-2",children:['ðŸ’¡ Astuce : Utilisez le bouton de ping pour tester la connectivitÃ© de "',l,'"']})]})]})}):b.length===0&&F&&!C?e.jsx(f,{children:e.jsx("div",{className:"flex items-center justify-center py-12 text-theme-secondary",children:e.jsx("span",{children:"Aucun rÃ©sultat ne correspond aux filtres sÃ©lectionnÃ©s"})})}):e.jsxs(f,{title:`RÃ©sultats (${b.length})`,actions:e.jsx("div",{className:"flex items-center gap-2 text-sm text-theme-secondary",children:e.jsxs("span",{children:["Page ",v," sur ",I]})}),children:[e.jsx("div",{className:"overflow-x-auto rounded-lg border border-theme",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-theme-secondary/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-theme-primary",children:e.jsxs("button",{onClick:()=>E("plugin"),className:"flex items-center gap-1.5 hover:text-accent-primary transition-colors group",children:[e.jsx("span",{children:"Plugin"}),e.jsx($,{size:14,className:h==="plugin"?"text-accent-primary":"text-theme-tertiary group-hover:text-theme-secondary"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-theme-primary",children:e.jsxs("button",{onClick:()=>E("type"),className:"flex items-center gap-1.5 hover:text-accent-primary transition-colors group",children:[e.jsx("span",{children:"Type"}),e.jsx($,{size:14,className:h==="type"?"text-accent-primary":"text-theme-tertiary group-hover:text-theme-secondary"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-theme-primary",children:e.jsxs("button",{onClick:()=>E("name"),className:"flex items-center gap-1.5 hover:text-accent-primary transition-colors group",children:[e.jsx("span",{children:"Nom"}),e.jsx($,{size:14,className:h==="name"?"text-accent-primary":"text-theme-tertiary group-hover:text-theme-secondary"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-theme-primary",children:e.jsxs("button",{onClick:()=>E("ip"),className:"flex items-center gap-1.5 hover:text-accent-primary transition-colors group",children:[e.jsx("span",{children:"IP"}),e.jsx($,{size:14,className:h==="ip"?"text-accent-primary":"text-theme-tertiary group-hover:text-theme-secondary"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-theme-primary",children:e.jsxs("button",{onClick:()=>E("mac"),className:"flex items-center gap-1.5 hover:text-accent-primary transition-colors group",children:[e.jsx("span",{children:"MAC"}),e.jsx($,{size:14,className:h==="mac"?"text-accent-primary":"text-theme-tertiary group-hover:text-theme-secondary"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-theme-primary",children:"Statut"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-theme-primary",children:"DerniÃ¨re vue"})]})}),e.jsx("tbody",{children:ve.map((s,t)=>{const r=s.pluginId==="freebox",a=s.pluginId==="unifi";return e.jsxs("tr",{className:"border-b border-theme hover:bg-theme-secondary/50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsx(he,{size:16,className:"text-blue-400"}),a&&e.jsx(pe,{size:16,className:"text-purple-400"}),e.jsx("span",{className:`font-medium ${r?"text-blue-400":a?"text-purple-400":"text-theme-primary"}`,children:s.pluginName})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs font-medium border ${s.type==="device"||s.type==="client"?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":s.type==="ap"||s.type==="switch"?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400":s.type==="dhcp"?"bg-amber-500/20 border-amber-500/50 text-amber-400":s.type==="port-forward"?"bg-orange-500/20 border-orange-500/50 text-orange-400":"bg-theme-secondary border-theme text-theme-secondary"}`,children:ae(s.type)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-theme-primary font-medium",children:s.name}),s.hostname&&s.hostname!==s.name&&e.jsx("span",{className:"text-xs text-theme-tertiary",children:s.hostname})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-theme-secondary",children:s.ip||"--"}),c&&s.ip&&g(s.ip)&&e.jsx("button",{onClick:()=>V(s.ip),disabled:p.has(s.ip),className:`p-1 rounded transition-colors ${p.has(s.ip)?"text-theme-tertiary cursor-not-allowed":"text-theme-secondary hover:text-cyan-400 hover:bg-cyan-500/10"}`,title:p.has(s.ip)?"Ping en cours...":`Pinger ${s.ip}`,children:p.has(s.ip)?e.jsx(R,{size:14,className:"animate-spin"}):e.jsx(xe,{size:14})})]}),c&&s.ip&&w(s.ip)&&e.jsx("div",{className:"flex items-center gap-1",children:p.has(s.ip)?e.jsxs("span",{className:"text-xs text-theme-tertiary flex items-center gap-1",children:[e.jsx(R,{size:10,className:"animate-spin"}),"Ping..."]}):o[s.ip]?o[s.ip].success?e.jsxs("span",{className:"text-xs text-emerald-400 font-medium",children:[o[s.ip].time,"ms"]}):e.jsx("span",{className:"text-xs text-red-400",title:o[s.ip].error,children:"Ã‰chec"}):null})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"font-mono text-theme-secondary",children:we(s.mac)})}),e.jsx("td",{className:"py-3 px-4",children:s.active!==void 0?e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs ${s.active?"bg-emerald-900/30 border border-emerald-700 text-emerald-400":"bg-gray-800/50 border border-gray-700 text-gray-500"}`,children:s.active?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:12}),"Actif"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{size:12}),"Inactif"]})}):e.jsx("span",{className:"text-theme-tertiary",children:"--"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-xs text-theme-tertiary",children:Se(s.lastSeen)})})]},`${s.pluginId}-${s.id}-${t}`)})})]})}),I>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-theme",children:[e.jsxs("button",{onClick:()=>U(s=>Math.max(1,s-1)),disabled:v===1,className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary border border-theme rounded-lg text-theme-primary hover:bg-theme-tertiary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(ke,{size:16}),"PrÃ©cÃ©dent"]}),e.jsxs("span",{className:"text-sm text-theme-secondary",children:["Page ",v," sur ",I]}),e.jsxs("button",{onClick:()=>U(s=>Math.min(I,s+1)),disabled:v===I,className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary border border-theme rounded-lg text-theme-primary hover:bg-theme-tertiary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Suivant",e.jsx(Ie,{size:16})]})]})]})]}),e.jsx(Ee,{isOpen:be,onClose:()=>J(!1)})]})};export{Le as SearchPage};
