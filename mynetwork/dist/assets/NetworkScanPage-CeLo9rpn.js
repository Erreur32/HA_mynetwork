import{q as Ae,F as $e,r as g,j as e,E as R,J as H,G as Me}from"./index-D769t3SB.js";import{r as i}from"./vendor-charts-fy94SsLU.js";import{N as He}from"./NetworkScanConfigModal-BtVl_IC3.js";import{aS as Oe,aO as O,m as _e,_,R as P,al as qe,c as Ve,A as k,d as D,a7 as Be,X as xe,aI as Ke,a0 as Ge,z as Ue,a8 as Xe}from"./vendor-icons-Wr2_Nvt-.js";import"./vendor-D9iDNHsv.js";import"./vendor-state-CiM9n9np.js";const ss=({onBack:ue})=>{const{plugins:me,fetchPlugins:q}=Ae(),[fe,ge]=i.useState([]),[c,he]=i.useState(null),[x,pe]=i.useState([]),[r,I]=i.useState(null),[ye,V]=i.useState(!0),[h,B]=i.useState(!1),[b,K]=i.useState(!1),[G,je]=i.useState("192.168.1.0/24"),[be,Ne]=i.useState(!1),[ve,Se]=i.useState("full"),[U,we]=i.useState(!1),[z,X]=i.useState(null),[N,Ce]=i.useState("all"),[v,ke]=i.useState(""),[o,S]=i.useState("ip"),[d,u]=i.useState("asc"),[T,J]=i.useState(()=>{const s=localStorage.getItem("networkScan_resultsPerPage");return s?parseInt(s,10):20}),[Q,E]=i.useState(""),[De,L]=i.useState(!1),[Le,A]=i.useState(null),[W,F]=i.useState(""),[Y,Z]=i.useState(!1),[Re,ee]=i.useState(!1),w=me.find(s=>s.id==="scan-reseau"),$=(w==null?void 0:w.enabled)&&(w==null?void 0:w.connectionStatus),se=async()=>{try{const s=await g.get("/api/network-scan/default-config");s.success&&s.result&&(je(s.result.defaultRange),Ne(s.result.defaultAutoDetect),Se(s.result.defaultScanType))}catch(s){console.error("Failed to fetch default config:",s)}finally{we(!0)}},te=async()=>{try{V(!0);const s=await g.get("/api/network-scan/auto-status");s.success&&s.result?(console.log("Auto-status received:",s.result),console.log("Enabled status:",s.result.enabled),I(s.result)):I({enabled:!1,fullScan:{config:{enabled:!1,interval:1440,scanType:"full"},scheduler:{enabled:!1,running:!1},lastExecution:null},refresh:{config:{enabled:!1,interval:10},scheduler:{enabled:!1,running:!1},lastExecution:null}})}catch(s){console.error("Failed to fetch auto status:",s),I({enabled:!1,fullScan:{config:{enabled:!1,interval:1440,scanType:"full"},scheduler:{enabled:!1,running:!1},lastExecution:null},refresh:{config:{enabled:!1,interval:10},scheduler:{enabled:!1,running:!1},lastExecution:null}})}finally{V(!1)}};i.useEffect(()=>{q(),j(),ae(),se(),te()},[q]),i.useEffect(()=>{U&&p()},[U,N,v,o,d,T]),i.useEffect(()=>()=>{z&&clearInterval(z)},[z]),$e(()=>{$&&(j(),ae(),p(),te())},{enabled:$,interval:Me.system});const j=async()=>{try{const s=await g.get("/api/network-scan/stats");s.success&&s.result&&he(s.result)}catch(s){console.error("Failed to fetch stats:",s)}},ae=async()=>{try{const s=await g.get("/api/network-scan/stats-history?hours=24");if(s.success&&s.result){console.log("Stats history received:",s.result.length,"hours"),console.log("Sample data:",s.result.slice(0,3));const t=s.result.filter(a=>typeof a.total=="number"&&typeof a.online=="number"&&typeof a.offline=="number");pe(t)}else console.warn("Stats history response:",s)}catch(s){console.error("Failed to fetch stats history:",s)}},p=async()=>{try{const s={limit:T.toString(),sortBy:o,sortOrder:d};N!=="all"&&(s.status=N),v&&(s.search=v);const t=new URLSearchParams(s).toString(),a=await g.get(`/api/network-scan/history?${t}`);a.success&&a.result&&ge(a.result.items||[])}catch(s){console.error("Failed to fetch history:",s)}},Ee=s=>{if(s==="custom")L(!0);else{const t=parseInt(s,10);J(t),localStorage.setItem("networkScan_resultsPerPage",t.toString()),L(!1)}},re=()=>{const s=parseInt(Q,10);s>0&&s<=1e4&&(J(s),localStorage.setItem("networkScan_resultsPerPage",s.toString()),L(!1),E(""))},Fe=async()=>{var t;B(!0);const s=setInterval(()=>{p(),j()},2e3);X(s);try{const a=await g.post("/api/network-scan/scan",{range:G||void 0,autoDetect:be||!G,scanType:ve});a.success?(await j(),await p()):alert(((t=a.error)==null?void 0:t.message)||"Erreur lors du scan")}catch(a){console.error("Scan failed:",a),alert("Erreur lors du scan: "+(a.message||"Erreur inconnue"))}finally{B(!1),clearInterval(s),X(null)}},Pe=async()=>{var t;K(!0);const s=setInterval(()=>{p(),j()},1500);try{const a=await g.post("/api/network-scan/refresh",{scanType:"quick"});a.success?(await j(),await p()):alert(((t=a.error)==null?void 0:t.message)||"Erreur lors du rafraîchissement")}catch(a){console.error("Refresh failed:",a),alert("Erreur lors du rafraîchissement: "+(a.message||"Erreur inconnue"))}finally{K(!1),clearInterval(s)}},Ie=async s=>{var a;if(window.confirm(`Êtes-vous sûr de vouloir supprimer l'IP ${s} de l'historique ?

Cette action est irréversible.`))try{const n=await g.delete(`/api/network-scan/${s}`);n.success?(await p(),await j()):alert(((a=n.error)==null?void 0:a.message)||"Erreur lors de la suppression")}catch(n){console.error("Delete failed:",n),alert("Erreur lors de la suppression: "+(n.message||"Erreur inconnue"))}},ze=(s,t)=>{A(s),F(t||"")},le=()=>{A(null),F("")},ne=async s=>{var t;try{const a=await g.post(`/api/network-scan/${s}/hostname`,{hostname:W.trim()||null});a.success?(await p(),A(null),F("")):alert(((t=a.error)==null?void 0:t.message)||"Erreur lors de la sauvegarde du hostname")}catch(a){console.error("Save hostname failed:",a),alert("Erreur lors de la sauvegarde: "+(a.message||"Erreur inconnue"))}},Te=s=>s?s<50?"text-emerald-400":s<100?"text-yellow-400":s<200?"text-orange-400":"text-red-400":"text-gray-400",ie=s=>{if(!s)return"--";if(s>=1e6){const t=Math.floor(s/1e3);if(t>=86400){const a=Math.floor(t/86400),n=Math.floor(t%86400/3600);return n>0?`${a}j ${n}h`:`${a}j`}else if(t>=3600){const a=Math.floor(t/3600),n=Math.floor(t%3600/60);return n>0?`${a}h ${n}min`:`${a}h`}else if(t>=60){const a=Math.floor(t/60),n=t%60;return n>0?`${a}min ${n}s`:`${a}min`}else return`${t}s`}return`${s}ms`},M=s=>new Date(s).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),C=s=>{const t=new Date(s),n=new Date().getTime()-t.getTime(),l=Math.floor(n/6e4),m=Math.floor(n/36e5),f=Math.floor(n/864e5);return l<1?"À l'instant":l<60?`Il y a ${l}min`:m<24?`Il y a ${m}h`:f<7?`Il y a ${f}j`:M(s)},ce=(s,t)=>{const a=new Date;let n;n=new Date(a.getTime()+t*6e4);const l=n.getTime()-a.getTime();if(l<=0)return`Le ${n.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})} à ${n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`;const m=Math.floor(l/6e4),f=Math.floor(l/36e5),y=Math.floor(l/864e5);return m<60?m<1?`Dans moins d'1min (${n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})`:`Dans ${m}min (${n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})`:f<24?`Dans ${f}h (${n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})`:y<7?`Dans ${y}j (${n.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})} ${n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})`:`Le ${n.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})} à ${n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`},oe=fe.filter(s=>{if(N!=="all"&&s.status!==N)return!1;if(v){const t=v.toLowerCase();return s.ip.toLowerCase().includes(t)||s.mac&&s.mac.toLowerCase().includes(t)||s.hostname&&s.hostname.toLowerCase().includes(t)}return!0});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:ue,className:"p-2 hover:bg-[#1a1a1a] rounded-lg transition-colors",title:"Retour au dashboard",children:e.jsx(Oe,{size:20,className:"text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{size:24,className:"text-cyan-400"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Scan Réseau"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[$&&e.jsxs("div",{className:"flex items-center gap-1.5 text-green-400 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{children:"Actif"})]}),e.jsxs("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-purple-500/10 hover:bg-purple-500/20 text-purple-400 rounded-lg border border-purple-500/30 transition-colors flex items-center gap-2",title:"Configuration du scan",children:[e.jsx(_e,{size:16}),e.jsx("span",{children:"Configuration"})]})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Info Scans"}),r&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Auto"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${r.enabled&&(r.fullScan.config.enabled||r.refresh.config.enabled)?"bg-emerald-500/20 text-emerald-400":"bg-gray-500/20 text-gray-400"}`,children:r.enabled&&(r.fullScan.config.enabled||r.refresh.config.enabled)?"ON":"OFF"})]})]}),className:"md:col-span-2",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"font-medium text-gray-300 mb-2",children:"Dernier Scan:"}),r!=null&&r.lastScan?e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.lastScan.isManual?e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded text-xs font-medium",children:"Manuel"}):e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 rounded text-xs font-medium",children:"Auto"}),e.jsx("span",{className:"text-gray-400",children:r.lastScan.type==="full"?e.jsxs(e.Fragment,{children:["Full Scan (",r.lastScan.scanType,")"]}):e.jsxs(e.Fragment,{children:["Refresh (",r.lastScan.scanType,")"]})}),e.jsx("span",{className:"text-gray-300 font-medium",children:M(r.lastScan.timestamp)}),e.jsxs("span",{className:"text-gray-500 text-xs mt-0.5",children:[C(r.lastScan.timestamp)," "]})]}),r.lastScan.range&&e.jsxs("div",{className:"text-gray-500 text-xs mt-0.5",children:["Plage: ",r.lastScan.range]})]}):c!=null&&c.lastScan?e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded text-xs font-medium",children:"Manuel"}),e.jsx("span",{className:"text-gray-300",children:"Scan"})," ",e.jsx("span",{className:"text-gray-300 font-medium",children:M(c.lastScan)})]}),e.jsx("div",{className:"text-gray-500 text-xs mt-0.5",children:C(c.lastScan)})]}):e.jsx("div",{className:"text-gray-500",children:"Aucun scan effectué"}),r&&r.enabled&&(r.fullScan.config.enabled||r.refresh.config.enabled)?e.jsxs("div",{className:"pt-2 border-t border-gray-800 space-y-1",children:[r.fullScan.config.enabled&&e.jsxs("div",{className:"flex items-center gap-2 text-xs whitespace-nowrap overflow-x-auto",children:[e.jsx(_,{size:12,className:"text-emerald-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300",children:"Auto"}),e.jsxs("span",{className:"text-gray-300",children:["Full scan (",r.fullScan.config.scanType,")"]}),r.fullScan.lastExecution?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-500",children:[new Date(r.fullScan.lastExecution.timestamp).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})," ",new Date(r.fullScan.lastExecution.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),e.jsx("span",{className:"text-gray-400",children:C(r.fullScan.lastExecution.timestamp)})]}):e.jsx("span",{className:"text-gray-500",children:ce(null,r.fullScan.config.interval)})]}),r.refresh.config.enabled&&e.jsxs("div",{className:"flex items-center gap-2 text-xs whitespace-nowrap overflow-x-auto",children:[e.jsx(_,{size:12,className:"text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-300",children:"Auto"}),e.jsx("span",{className:"text-gray-300",children:"Refresh (quick)"}),r.refresh.lastExecution?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-500",children:[new Date(r.refresh.lastExecution.timestamp).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})," ",new Date(r.refresh.lastExecution.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),e.jsx("span",{className:"text-gray-400",children:C(r.refresh.lastExecution.timestamp)})]}):e.jsx("span",{className:"text-gray-500",children:ce(null,r.refresh.config.interval)})]})]}):ye?e.jsx("div",{className:"text-gray-500 text-xs pt-2 border-t border-gray-800",children:"Chargement..."}):r&&!r.enabled?e.jsx("div",{className:"text-gray-500 text-xs pt-2 border-t border-gray-800",children:"Scan automatique désactivé"}):r&&r.enabled&&!r.fullScan.config.enabled&&!r.refresh.config.enabled?e.jsx("div",{className:"text-gray-500 text-xs pt-2 border-t border-gray-800",children:"Aucun scan auto configuré"}):null]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:Pe,disabled:b,className:"w-full px-4 py-2 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 rounded-lg border border-blue-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors",children:[e.jsx(P,{size:16,className:b?"animate-spin":""}),"Rafraîchir"]}),e.jsxs("button",{onClick:Fe,disabled:h,className:"w-full px-4 py-2 bg-green-500/10 hover:bg-green-500/20 text-green-400 rounded-lg border border-green-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors",children:[e.jsx(qe,{size:16,className:h?"animate-spin":""}),"Scanner"]}),h||b?e.jsxs("div",{className:"flex items-center justify-center gap-2 px-2 py-1.5 bg-blue-500/20 text-blue-400 rounded text-xs font-semibold animate-pulse",children:[e.jsx(P,{size:12,className:"animate-spin"}),e.jsx("span",{children:h?"Scan en cours...":"Rafraîchissement..."})]}):null]})]})}),e.jsxs(R,{title:"Total IPs",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-200 text-center mb-2",children:c.total}),e.jsx("div",{className:"h-12 mt-2",children:(()=>{let s;x.length>0?(s=x.map(l=>l.total||0).filter(l=>l>=0),(s.length===0||s.every(l=>l===0))&&(s=Array(24).fill(c.total||0))):s=Array(24).fill(c.total||0);const t=s.slice(-48);if(t.length<12){const l=t.length>0?t[t.length-1]:c.total||0;for(;t.length<12;)t.unshift(l)}const a=x.length>0?x.map(l=>l.time).slice(-48):[],n=a.length===t.length?a:t.map((l,m)=>{const f=new Date,y=t.length-m-1;return new Date(f.getTime()-y*60*60*1e3).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})});return e.jsx(H,{data:t,color:"#9ca3af",labels:n,valueLabel:"Total IPs"})})()})]}),e.jsxs(R,{title:"Online",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400 text-center mb-2",children:c.online}),e.jsx("div",{className:"h-12 mt-2",children:(()=>{let s;x.length>0?(s=x.map(l=>l.online||0).filter(l=>l>=0),(s.length===0||s.every(l=>l===0))&&(s=Array(24).fill(c.online||0))):s=Array(24).fill(c.online||0);const t=s.slice(-48);if(t.length<12){const l=t.length>0?t[t.length-1]:c.online||0;for(;t.length<12;)t.unshift(l)}const a=x.length>0?x.map(l=>l.time).slice(-48):[],n=a.length===t.length?a:t.map((l,m)=>{const f=new Date,y=t.length-m-1;return new Date(f.getTime()-y*60*60*1e3).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})});return e.jsx(H,{data:t,color:"#10b981",labels:n,valueLabel:"Online"})})()})]}),e.jsxs(R,{title:"Offline",children:[e.jsx("div",{className:"text-3xl font-bold text-red-400 text-center mb-2",children:c.offline}),e.jsx("div",{className:"h-12 mt-2",children:(()=>{let s;x.length>0?(s=x.map(l=>l.offline||0).filter(l=>l>=0),(s.length===0||s.every(l=>l===0))&&(s=Array(24).fill(c.offline||0))):s=Array(24).fill(c.offline||0);const t=s.slice(-48);if(t.length<12){const l=t.length>0?t[t.length-1]:c.offline||0;for(;t.length<12;)t.unshift(l)}const a=x.length>0?x.map(l=>l.time).slice(-48):[],n=a.length===t.length?a:t.map((l,m)=>{const f=new Date,y=t.length-m-1;return new Date(f.getTime()-y*60*60*1e3).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})});return e.jsx(H,{data:t,color:"#ef4444",labels:n,valueLabel:"Offline"})})()})]})]}),e.jsxs(R,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-cyan-500/20 rounded-lg",children:e.jsx(O,{size:16,className:"text-cyan-400"})}),e.jsx("span",{className:"px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm font-bold",children:(c==null?void 0:c.total)||0}),(h||b)&&e.jsxs("div",{className:"flex items-center gap-2 px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded text-xs font-semibold animate-pulse",children:[e.jsx(P,{size:12,className:"animate-spin"}),e.jsx("span",{children:h?"Scan en cours...":"Rafraîchissement..."})]})]}),actions:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{value:N,onChange:s=>Ce(s.target.value),className:"px-4 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-sm text-gray-200 focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"Tous"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"offline",children:"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-400 whitespace-nowrap",children:"Résultats:"}),De?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"10000",value:Q,onChange:s=>E(s.target.value),onKeyDown:s=>{s.key==="Enter"?re():s.key==="Escape"&&(L(!1),E(""))},placeholder:"Nombre",className:"w-20 px-2 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-sm text-gray-200 focus:outline-none focus:border-blue-500",autoFocus:!0}),e.jsx("button",{onClick:re,className:"px-3 py-2 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 rounded-lg border border-blue-500/30 text-sm",children:"OK"}),e.jsx("button",{onClick:()=>{L(!1),E("")},className:"px-3 py-2 bg-gray-500/10 hover:bg-gray-500/20 text-gray-400 rounded-lg border border-gray-500/30 text-sm",children:"Annuler"})]}):e.jsxs("select",{value:T.toString(),onChange:s=>Ee(s.target.value),className:"px-4 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-sm text-gray-200 focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"30",children:"30"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"}),e.jsx("option",{value:"custom",children:"Manuel"})]})]})]}),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsx(Ve,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:v,onChange:s=>ke(s.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-4 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-sm text-gray-200 focus:outline-none focus:border-blue-500"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-36"}),e.jsx("col",{className:"w-40"}),e.jsx("col",{className:"w-48"}),e.jsx("col",{className:"w-24"}),e.jsx("col",{className:"w-32"}),e.jsx("col",{className:"w-40"}),e.jsx("col",{className:"w-24"})]}),e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",onClick:()=>{o==="ip"?u(d==="asc"?"desc":"asc"):(S("ip"),u("asc"))},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"IP"}),o==="ip"&&(d==="asc"?e.jsx(k,{size:14,className:"text-blue-400"}):e.jsx(D,{size:14,className:"text-blue-400"}))]})}),e.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",onClick:()=>{o==="mac"?u(d==="asc"?"desc":"asc"):(S("mac"),u("asc"))},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"MAC"}),o==="mac"&&(d==="asc"?e.jsx(k,{size:14,className:"text-blue-400"}):e.jsx(D,{size:14,className:"text-blue-400"}))]})}),e.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",onClick:()=>{o==="hostname"?u(d==="asc"?"desc":"asc"):(S("hostname"),u("asc"))},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Hostname"}),o==="hostname"&&(d==="asc"?e.jsx(k,{size:14,className:"text-blue-400"}):e.jsx(D,{size:14,className:"text-blue-400"}))]})}),e.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",onClick:()=>{o==="status"?u(d==="asc"?"desc":"asc"):(S("status"),u("asc"))},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Statut"}),o==="status"&&(d==="asc"?e.jsx(D,{size:14,className:"text-blue-400"}):e.jsx(k,{size:14,className:"text-blue-400"}))]})}),e.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",onClick:()=>{o==="ping_latency"?u(d==="asc"?"desc":"asc"):(S("ping_latency"),u("asc"))},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Latence"}),o==="ping_latency"&&(d==="asc"?e.jsx(D,{size:14,className:"text-blue-400"}):e.jsx(k,{size:14,className:"text-blue-400"}))]})}),e.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",onClick:()=>{o==="last_seen"?u(d==="asc"?"desc":"asc"):(S("last_seen"),u("asc"))},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Dernière vue"}),o==="last_seen"&&(d==="asc"?e.jsx(D,{size:14,className:"text-blue-400"}):e.jsx(k,{size:14,className:"text-blue-400"}))]})}),e.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{children:oe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:h||b?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(P,{size:16,className:"animate-spin text-blue-400"}),e.jsx("span",{children:"Scan en cours..."})]}):"Aucun résultat"})}):oe.map(s=>e.jsxs("tr",{className:`border-b border-gray-800 hover:bg-[#1a1a1a] transition-colors ${(h||b)&&s.status==="online"?"animate-pulse bg-blue-500/5":""}`,children:[e.jsx("td",{className:`py-3 px-4 text-sm font-mono truncate ${s.status==="offline"?"text-gray-500":"text-gray-200"}`,title:s.ip,children:s.ip}),e.jsx("td",{className:"py-3 px-4 text-sm font-mono text-gray-400 truncate",title:s.mac||"--",children:s.mac||"--"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-300 truncate",children:Le===s.ip?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:W,onChange:t=>F(t.target.value),onKeyDown:t=>{t.key==="Enter"&&ne(s.ip),t.key==="Escape"&&le()},className:"px-2 py-1 bg-[#1a1a1a] border border-blue-500 rounded text-gray-200 text-sm focus:outline-none focus:border-blue-400 w-full",autoFocus:!0}),e.jsx("button",{onClick:()=>ne(s.ip),className:"p-1 hover:bg-emerald-500/10 text-emerald-400 rounded transition-colors flex-shrink-0",title:"Sauvegarder",children:e.jsx(Be,{size:14})}),e.jsx("button",{onClick:le,className:"p-1 hover:bg-red-500/10 text-red-400 rounded transition-colors flex-shrink-0",title:"Annuler",children:e.jsx(xe,{size:14})})]}):e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("span",{className:"truncate",title:s.hostname||"--",children:s.hostname||"--"}),e.jsx("button",{onClick:()=>ze(s.ip,s.hostname||""),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-blue-500/10 text-blue-400 rounded transition-all flex-shrink-0",title:"Renommer",children:e.jsx(Ke,{size:12})})]})}),e.jsx("td",{className:"py-3 px-4 truncate",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="online"?e.jsx(_,{size:16,className:"text-emerald-400 flex-shrink-0"}):s.status==="offline"?e.jsx(Ge,{size:16,className:"text-red-400 flex-shrink-0"}):e.jsx(Ue,{size:16,className:"text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm capitalize truncate",children:s.status})]})}),e.jsx("td",{className:"py-3 px-4 truncate",children:e.jsx("span",{className:`text-sm font-medium ${Te(s.pingLatency)}`,title:ie(s.pingLatency),children:ie(s.pingLatency)})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-400 truncate",title:C(s.lastSeen),children:C(s.lastSeen)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>Ie(s.ip),className:"p-1 hover:bg-red-500/10 text-red-400 rounded transition-colors",title:"Supprimer",children:e.jsx(Xe,{size:16})})})]},s.id))})]})})]}),Y&&e.jsx(He,{isOpen:Y,onClose:()=>{Z(!1),se()}}),Re&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-[#121212] border border-gray-700 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(O,{size:24,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Aide - Format de plage réseau"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Comment spécifier une plage d'IPs à scanner"})]})]}),e.jsx("button",{onClick:()=>ee(!1),className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-800 rounded-lg",type:"button",children:e.jsx(xe,{size:20})})]}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-3",children:"Format de plage réseau"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-300",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-purple-300 mb-1",children:"Notation CIDR (recommandé) :"}),e.jsx("code",{className:"block bg-[#1a1a1a] px-3 py-2 rounded text-emerald-400 font-mono text-xs my-2",children:"192.168.1.0/24"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Scanne les IPs de 192.168.1.1 à 192.168.1.254 (254 IPs)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-purple-300 mb-1",children:"Notation par plage :"}),e.jsx("code",{className:"block bg-[#1a1a1a] px-3 py-2 rounded text-emerald-400 font-mono text-xs my-2",children:"192.168.1.1-254"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Scanne les IPs de 192.168.1.1 à 192.168.1.254"})]}),e.jsxs("div",{className:"bg-[#1a1a1a] rounded p-3 mt-3",children:[e.jsx("p",{className:"font-semibold text-yellow-400 mb-2 text-xs",children:"Masques réseau courants :"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("li",{children:[e.jsx("code",{className:"text-emerald-400",children:"/24"})," = 254 IPs (192.168.1.1-254) - Réseau local standard"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-emerald-400",children:"/25"})," = 126 IPs (192.168.1.1-192.168.1.126)"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-emerald-400",children:"/26"})," = 62 IPs (192.168.1.1-192.168.1.62)"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-red-400",children:"/16"})," = 65534 IPs - Trop large, non supporté"]})]})]})]})]})}),e.jsx("div",{className:"flex justify-end p-6 border-t border-gray-800",children:e.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 bg-gray-500/10 hover:bg-gray-500/20 text-gray-400 rounded-lg border border-gray-500/30 transition-colors",type:"button",children:"Fermer"})})]})})]})};export{ss as NetworkScanPage};
